<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>klusters: baseframe.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>baseframe.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">                          baseframe.h  -  description</span>
<a name="l00003"></a>00003 <span class="comment">                             -------------------</span>
<a name="l00004"></a>00004 <span class="comment">    begin                : Wed Feb 18 2004</span>
<a name="l00005"></a>00005 <span class="comment">    copyright            : (C) 2004 by Lynn Hazan</span>
<a name="l00006"></a>00006 <span class="comment">    email                : lynn.hazan@myrealbox.com</span>
<a name="l00007"></a>00007 <span class="comment"> ***************************************************************************/</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment">/***************************************************************************</span>
<a name="l00010"></a>00010 <span class="comment"> *                                                                         *</span>
<a name="l00011"></a>00011 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00012"></a>00012 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00013"></a>00013 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00014"></a>00014 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00015"></a>00015 <span class="comment"> *                                                                         *</span>
<a name="l00016"></a>00016 <span class="comment"> ***************************************************************************/</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef BASEFRAME_H</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define BASEFRAME_H</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="comment">// include files for QT</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;qwidget.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;qframe.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;qcursor.h&gt;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="comment">//include files for the application</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include "zoomwindow.h"</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment">//General C++ include files</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00031"></a>00031 <span class="keyword">using namespace </span>std;
<a name="l00032"></a>00032 
<a name="l00048"></a><a class="code" href="classBaseFrame.html">00048</a> <span class="keyword">class </span><a class="code" href="classBaseFrame.html">BaseFrame</a> : <span class="keyword">public</span> QFrame  {
<a name="l00049"></a>00049    Q_OBJECT
<a name="l00050"></a>00050    
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00052"></a>00052 
<a name="l00056"></a><a class="code" href="classBaseFrame.html#2d7e24808016f5b91c7232ab9b8fd148">00056</a>   <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="classBaseFrame.html#2d7e24808016f5b91c7232ab9b8fd148">Mode</a>;
<a name="l00057"></a>00057 
<a name="l00060"></a>00060   <span class="keyword">enum</span> {ZOOM = 1};
<a name="l00061"></a>00061 
<a name="l00079"></a>00079   <a class="code" href="classBaseFrame.html#042d27fb77a59e37912653348f9883f3">BaseFrame</a>(<span class="keywordtype">int</span> <a class="code" href="classBaseFrame.html#a2261962eadacd199a841dc92d05e540">Xborder</a>,<span class="keywordtype">int</span> <a class="code" href="classBaseFrame.html#2b9fdad548fa78d7970f729483a6f519">Yborder</a>,QWidget* parent=0, <span class="keyword">const</span> <span class="keywordtype">char</span>* name=0,QColor backgroundColor = Qt::black,
<a name="l00080"></a>00080            <span class="keywordtype">int</span> minSize = 500, <span class="keywordtype">int</span> maxSize = 4000, <span class="keywordtype">int</span> windowTopLeft = -500,<span class="keywordtype">int</span> windowBottomRight = 1001, <span class="keywordtype">int</span> border = 0);
<a name="l00081"></a>00081      ~<a class="code" href="classBaseFrame.html">BaseFrame</a>();
<a name="l00082"></a>00082   
<a name="l00084"></a><a class="code" href="classBaseFrame.html#ae11d84b7ca8f1867c8115388c35b5f2">00084</a>   <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#ae11d84b7ca8f1867c8115388c35b5f2">willBeKilled</a>(){};
<a name="l00085"></a>00085 
<a name="l00092"></a><a class="code" href="classBaseFrame.html#8293d6698f18deef9410ea9805c06112">00092</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#8293d6698f18deef9410ea9805c06112">setBorders</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y){
<a name="l00093"></a>00093    <a class="code" href="classBaseFrame.html#a2261962eadacd199a841dc92d05e540">Xborder</a> = x;
<a name="l00094"></a>00094    <a class="code" href="classBaseFrame.html#2b9fdad548fa78d7970f729483a6f519">Yborder</a> = y; 
<a name="l00095"></a>00095   };
<a name="l00096"></a>00096   
<a name="l00097"></a>00097 <span class="keyword">public</span> slots:
<a name="l00098"></a>00098 
<a name="l00100"></a><a class="code" href="classBaseFrame.html#a93e1824a7160bbae2933e64f4e8ba9b">00100</a>   <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#a93e1824a7160bbae2933e64f4e8ba9b">updateDrawing</a>(){};
<a name="l00101"></a>00101 
<a name="l00102"></a>00102   <span class="comment">/***If the frame is contained in a dockWidget, this slot can be used</span>
<a name="l00103"></a>00103 <span class="comment">  * when the enclosing dockwidget is being closed.</span>
<a name="l00104"></a>00104 <span class="comment">  * Emits the parentDockBeingClosed signal.</span>
<a name="l00105"></a>00105 <span class="comment">  */</span>
<a name="l00106"></a>00106   <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> dockBeingClosed(){emit parentDockBeingClosed(<span class="keyword">this</span>);};
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="comment">/***Changes the color of the background.*/</span>
<a name="l00109"></a>00109   <span class="keyword">virtual</span> <span class="keywordtype">void</span> changeBackgroundColor(QColor color);
<a name="l00110"></a>00110 
<a name="l00114"></a><a class="code" href="classBaseFrame.html#ed169686b843e124a5ac901ac735ccd3">00114</a>   <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#ed169686b843e124a5ac901ac735ccd3">setMode</a>(<a class="code" href="classBaseFrame.html#2d7e24808016f5b91c7232ab9b8fd148">BaseFrame::Mode</a> selectedMode){<a class="code" href="classBaseFrame.html#3bac911fa71469ffae97a2cc1d7c5ac8">mode</a> = selectedMode;};
<a name="l00115"></a>00115   
<a name="l00116"></a>00116 signals:
<a name="l00117"></a>00117    <span class="comment">/***Signals that the enclosing dockwidget is being closed</span>
<a name="l00118"></a>00118 <span class="comment">   * @param viewWidget pointer on the the current object.</span>
<a name="l00119"></a>00119 <span class="comment">   */</span>
<a name="l00120"></a>00120    <span class="keywordtype">void</span> parentDockBeingClosed(QWidget* viewWidget);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="keyword">protected</span>:
<a name="l00127"></a>00127   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#2b5d68358bfcc4ecdd0c3e6a3da82ac6">drawContents</a>(QPainter* p)=0;
<a name="l00128"></a>00128 
<a name="l00132"></a>00132   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#327a39135fa2ee76c5366c6277310c63">resizeEvent</a>(QResizeEvent* event);
<a name="l00133"></a>00133 
<a name="l00137"></a>00137   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#154d190f81125058199ed6770c5152b6">mousePressEvent</a>(QMouseEvent* event); 
<a name="l00138"></a>00138 
<a name="l00142"></a>00142   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#7b6086bb37e3ad0c56a8b8eb166b3d9e">mouseReleaseEvent</a>(QMouseEvent* event);  
<a name="l00143"></a>00143 
<a name="l00147"></a>00147   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#e0bc9fac62c249065e52f3d393e84cf7">mouseMoveEvent</a>(QMouseEvent* event);
<a name="l00148"></a>00148 
<a name="l00152"></a>00152   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#61ed8b87d4046aa64b74855f200b4e1b">mouseDoubleClickEvent</a>(QMouseEvent* event);
<a name="l00153"></a>00153 
<a name="l00160"></a>00160   QPoint <a class="code" href="classBaseFrame.html#1d2cf80aab1a6867fd30f61cb53f4dc5">viewportToWorld</a>(<span class="keywordtype">int</span> vx, <span class="keywordtype">int</span> vy);
<a name="l00161"></a>00161 
<a name="l00168"></a><a class="code" href="classBaseFrame.html#bc359186819f10c30a5ae505d6f1920d">00168</a>   <span class="keyword">inline</span> QPoint <a class="code" href="classBaseFrame.html#1d2cf80aab1a6867fd30f61cb53f4dc5">viewportToWorld</a>(<span class="keyword">const</span> QPoint&amp; point){
<a name="l00169"></a>00169     <span class="keywordflow">return</span> <a class="code" href="classBaseFrame.html#1d2cf80aab1a6867fd30f61cb53f4dc5">viewportToWorld</a>(point.x(), point.y());
<a name="l00170"></a>00170   };
<a name="l00171"></a>00171 
<a name="l00178"></a>00178   QPoint <a class="code" href="classBaseFrame.html#2b50027b15770de7f37b59917152c69b">worldToViewport</a>(<span class="keywordtype">int</span> wx, <span class="keywordtype">int</span> wy);
<a name="l00179"></a>00179 
<a name="l00186"></a><a class="code" href="classBaseFrame.html#2b63b89729e706626167a7dc7020a3aa">00186</a>   <span class="keyword">inline</span> QPoint <a class="code" href="classBaseFrame.html#2b50027b15770de7f37b59917152c69b">worldToViewport</a>(<span class="keyword">const</span> QPoint&amp; point){
<a name="l00187"></a>00187     <span class="keywordflow">return</span> <a class="code" href="classBaseFrame.html#2b50027b15770de7f37b59917152c69b">worldToViewport</a>(point.x(), point.y());
<a name="l00188"></a>00188   };
<a name="l00189"></a>00189 
<a name="l00195"></a>00195   <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#282acf96cb3e2cf1889da54236d1623e">worldToViewportAbscissa</a>(<span class="keywordtype">long</span> wx);
<a name="l00196"></a>00196 
<a name="l00202"></a>00202   <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#a66187fbc3b1a9978f7604a17a04071b">worldToViewportOrdinate</a>(<span class="keywordtype">long</span> wy);
<a name="l00203"></a>00203 
<a name="l00207"></a>00207   <span class="keywordtype">void</span>  <a class="code" href="classBaseFrame.html#c1183e155932c92026c2e8e9553905ea">drawRubber</a>();
<a name="l00208"></a>00208 
<a name="l00214"></a><a class="code" href="classBaseFrame.html#f7ebfc8274c67f570b5051977cefe9b2">00214</a>   <span class="keyword">inline</span> <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#f7ebfc8274c67f570b5051977cefe9b2">worldToViewportWidth</a>(<span class="keywordtype">long</span> width){
<a name="l00215"></a>00215     <span class="keywordtype">float</span> widthRatio = (static_cast&lt;float&gt;(viewport.width())/static_cast&lt;float&gt;(((QRect)<a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">window</a>).width()));
<a name="l00216"></a>00216     <span class="keywordflow">return</span> static_cast&lt;long&gt;(width * widthRatio);
<a name="l00217"></a>00217   };
<a name="l00218"></a>00218 
<a name="l00224"></a><a class="code" href="classBaseFrame.html#af257590f63f103f946f599add211cd5">00224</a>   <span class="keyword">inline</span> <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#af257590f63f103f946f599add211cd5">worldToViewportHeight</a>(<span class="keywordtype">long</span> height){
<a name="l00225"></a>00225     <span class="keywordtype">float</span> heightRatio = (static_cast&lt;float&gt;(viewport.height())/static_cast&lt;float&gt;(((QRect)<a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">window</a>).height()));
<a name="l00226"></a>00226     <span class="keywordflow">return</span> static_cast&lt;long&gt;(height * heightRatio);
<a name="l00227"></a>00227   };
<a name="l00228"></a>00228 
<a name="l00234"></a><a class="code" href="classBaseFrame.html#d637eb7a91439ee66bacb4efd6445572">00234</a>   <span class="keyword">inline</span> <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#d637eb7a91439ee66bacb4efd6445572">viewportToWorldWidth</a>(<span class="keywordtype">long</span> width){
<a name="l00235"></a>00235     <span class="keywordtype">float</span> widthRatio = (static_cast&lt;float&gt;(((QRect)<a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">window</a>).width())/static_cast&lt;float&gt;(viewport.width()));
<a name="l00236"></a>00236     <span class="keywordflow">return</span> static_cast&lt;long&gt;(width * widthRatio);
<a name="l00237"></a>00237   };
<a name="l00238"></a>00238 
<a name="l00244"></a><a class="code" href="classBaseFrame.html#8a56e7d97d02b9906e63526db945ebed">00244</a>   <span class="keyword">inline</span> <span class="keywordtype">long</span> <a class="code" href="classBaseFrame.html#8a56e7d97d02b9906e63526db945ebed">viewportToWorldHeight</a>(<span class="keywordtype">long</span> height){
<a name="l00245"></a>00245     <span class="keywordtype">float</span> heightRatio = (static_cast&lt;float&gt;(((QRect)<a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">window</a>).height())/static_cast&lt;float&gt;(viewport.height()));
<a name="l00246"></a>00246     <span class="keywordflow">return</span> static_cast&lt;long&gt;(height * heightRatio);
<a name="l00247"></a>00247   };
<a name="l00248"></a>00248 
<a name="l00253"></a><a class="code" href="classBaseFrame.html#a1c10be0c7c3b6c76c3dc3156d267e70">00253</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classBaseFrame.html#a1c10be0c7c3b6c76c3dc3156d267e70">drawRubberBand</a>(<span class="keywordtype">bool</span> draw,<span class="keywordtype">bool</span> vertical = <span class="keyword">false</span>){
<a name="l00254"></a>00254    <a class="code" href="classBaseFrame.html#fc0aaeb9c105479f46868dc9d4b01a6e">isRubberBandToBeDrawn</a> = draw;
<a name="l00255"></a>00255    <a class="code" href="classBaseFrame.html#b96c798f9995cdf917d56ebda2fdfd3e">wholeHeightRectangle</a> = vertical;
<a name="l00256"></a>00256   };
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">//Members</span>
<a name="l00259"></a>00259 
<a name="l00264"></a><a class="code" href="classBaseFrame.html#21ad37725f0a1d7cc7e391961db82312">00264</a>   <span class="keyword">enum</span> <a class="code" href="classBaseFrame.html#21ad37725f0a1d7cc7e391961db82312">DrawContentsMode</a>{REFRESH=1, UPDATE=2,REDRAW=3};
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <span class="keyword">const</span> <span class="keywordtype">int</span> MIN_SIZE; <span class="comment">//Default 500</span>
<a name="l00267"></a>00267   <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_SIZE; <span class="comment">//Default 4000</span>
<a name="l00268"></a>00268   <span class="keyword">const</span> <span class="keywordtype">int</span> BORDER; <span class="comment">//Default 0</span>
<a name="l00269"></a>00269   <span class="keyword">const</span> <span class="keywordtype">int</span> WINDOW_TOP_LEFT; <span class="comment">//Default -500</span>
<a name="l00270"></a>00270   <span class="keyword">const</span> <span class="keywordtype">int</span> WINDOW_BOTTOM_RIGHT; <span class="comment">//Default 1001</span>
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   QSize oldSize;
<a name="l00273"></a>00273   QRect viewport;
<a name="l00274"></a>00274 
<a name="l00278"></a><a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">00278</a>   <a class="code" href="classZoomWindow.html">ZoomWindow</a> <a class="code" href="classBaseFrame.html#5b9fe7f64b7737c193c4427a5ab8c271">window</a>;
<a name="l00282"></a><a class="code" href="classBaseFrame.html#2aa532f84a5f6f97c2fe4b51c0a51ce1">00282</a>   QPoint <a class="code" href="classBaseFrame.html#2aa532f84a5f6f97c2fe4b51c0a51ce1">firstClick</a>;
<a name="l00286"></a><a class="code" href="classBaseFrame.html#c9c373aa1730932c563bc99779dc600f">00286</a>   <span class="keywordtype">bool</span> <a class="code" href="classBaseFrame.html#c9c373aa1730932c563bc99779dc600f">isDoubleClick</a>;
<a name="l00290"></a><a class="code" href="classBaseFrame.html#3af90d61c65b68208c68adb5dd895549">00290</a>   QRect* <a class="code" href="classBaseFrame.html#3af90d61c65b68208c68adb5dd895549">rubber</a>;
<a name="l00291"></a>00291 
<a name="l00293"></a><a class="code" href="classBaseFrame.html#dda2f5f4c168321c208349db2e7b5ed9">00293</a>   <a class="code" href="classBaseFrame.html#21ad37725f0a1d7cc7e391961db82312">DrawContentsMode</a> <a class="code" href="classBaseFrame.html#dda2f5f4c168321c208349db2e7b5ed9">drawContentsMode</a>;
<a name="l00294"></a>00294 
<a name="l00298"></a><a class="code" href="classBaseFrame.html#3bac911fa71469ffae97a2cc1d7c5ac8">00298</a>    <a class="code" href="classBaseFrame.html#2d7e24808016f5b91c7232ab9b8fd148">Mode</a> <a class="code" href="classBaseFrame.html#3bac911fa71469ffae97a2cc1d7c5ac8">mode</a>;
<a name="l00299"></a>00299 
<a name="l00301"></a><a class="code" href="classBaseFrame.html#a6054da9012b308d2c041ec63df5b5cd">00301</a>   QCursor <a class="code" href="classBaseFrame.html#a6054da9012b308d2c041ec63df5b5cd">zoomCursor</a>;
<a name="l00302"></a>00302 
<a name="l00305"></a><a class="code" href="classBaseFrame.html#a2261962eadacd199a841dc92d05e540">00305</a>   <span class="keywordtype">int</span> <a class="code" href="classBaseFrame.html#a2261962eadacd199a841dc92d05e540">Xborder</a>;
<a name="l00306"></a>00306 
<a name="l00309"></a><a class="code" href="classBaseFrame.html#2b9fdad548fa78d7970f729483a6f519">00309</a>   <span class="keywordtype">int</span> <a class="code" href="classBaseFrame.html#2b9fdad548fa78d7970f729483a6f519">Yborder</a>;
<a name="l00310"></a>00310 
<a name="l00312"></a><a class="code" href="classBaseFrame.html#fc0aaeb9c105479f46868dc9d4b01a6e">00312</a>   <span class="keywordtype">bool</span> <a class="code" href="classBaseFrame.html#fc0aaeb9c105479f46868dc9d4b01a6e">isRubberBandToBeDrawn</a>;
<a name="l00313"></a>00313 
<a name="l00317"></a><a class="code" href="classBaseFrame.html#b96c798f9995cdf917d56ebda2fdfd3e">00317</a>   <span class="keywordtype">bool</span> <a class="code" href="classBaseFrame.html#b96c798f9995cdf917d56ebda2fdfd3e">wholeHeightRectangle</a>;
<a name="l00318"></a>00318 
<a name="l00320"></a><a class="code" href="classBaseFrame.html#46ae781de9307957e8a1eb0a5f5a64c6">00320</a>   QColor <a class="code" href="classBaseFrame.html#46ae781de9307957e8a1eb0a5f5a64c6">colorLegend</a>;
<a name="l00321"></a>00321   
<a name="l00322"></a>00322 };
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Sep 13 21:12:47 2007 for klusters by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
